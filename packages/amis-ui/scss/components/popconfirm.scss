// $popconfirm-prefix-cls: '@{kd-prefix}-popconfirm';

// $popconfirm-title-line-height: 21px;
// $popconfirm-box-shadow-blur: 16px;

// .showdow(@x, @y) {
//   box-shadow: @x @y $popconfirm-box-shadow-blur 3px rgba(0, 0, 0, 0.08);
// }

$radius-border: 2px;
// spacing
$popconfirm-vertical-gap: var(--cxd-popconfirm--spacing-padding-vertical, 12px);
$popconfirm-horizontal-gap: var(
  --cxd-popconfirm--spacing-padding-horizontal,
  12px
);
$popconfirm-title-icon-margin-right: var(
  --cxd-popconfirm--title-icon-spacing-margin-right,
  6px
);
$popconfirm-message-margin-top: var(
  --cxd-popconfirm--message-spacing-margin-top,
  6px
);
$popconfirm-message-margin-bottom: var(
  --cxd-popconfirm--message-spacing-margin-bottom,
  8px
);
$popconfirm-button-spacing: var(--cxd-popconfirm--button-spacing, 12px);

// sizing
$popconfirm-width: var(--cxd-popconfirm--sizing-min-width, 160px);
$popconfirm-icon-size: var(--cxd-popconfirm--icon-sizing-square, 17px);

// color
$popconfirm-title-color: var(
  --cxd-popconfirm--title-color-text,
  rgba(0, 0, 0, 0.88)
);
$popconfirm-message-color: var(
  --cxd-popconfirm--message-color-text,
  rgba(0, 0, 0, 0.88)
);
$popconfirm-icon-color: var(--cxd-popconfirm--icon-color-text, 'red');
$popconfirm-background-color: var(--cxd-popconfirm--color-background, #fff);

// font
$popconfirm-title-font-size: var(--cxd-popconfirm--title-font-size, 14px);
$popconfirm-message-font-size: var(--cxd-popconfirm--message-font-size, 14px);

// radius
$popconfirm-border-radius: var(--cxd-popconfirm-radius-border, 2px);
$popconfirm-z-index: 500;
$popconfirm-title-line-height: 21px;
$popconfirm-box-shadow-blur: 16px;

/** 浮层箭头样式 **/
@mixin popperArrow($popperBg, $offset, $blur) {
  &.arrow {
    &::before {
      position: absolute;
      z-index: -2;
      background: $popperBg;
      border-style: solid;
      border-width: var(--arrowSize);
      transform: rotate(45deg);
      content: '';
    }

    &::after {
      position: absolute;
      z-index: -1;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      content: '';
      background: $popperBg;
      border-radius: $radius-border;
    }

    &.bottomLeft,
    &.bottom,
    &.bottomRight {
      &::before {
        left: var(--arrowLeft);
        top: var(--arrowSpill);
        box-shadow: -2px -2px calc($blur - 1px) rgba(0, 0, 0, 0.1);
        border-color: $popperBg transparent transparent $popperBg;
      }
    }

    &.topLeft,
    &.top,
    &.topRight {
      &::before {
        left: var(--arrowLeft);
        bottom: var(--arrowSpill);
        box-shadow: 3px 3px calc($blur + 1px) rgba(0, 0, 0, 0.15);
        border-color: transparent $popperBg $popperBg transparent;
      }
    }

    &.leftTop,
    &.left,
    &.leftBottom {
      &::before {
        top: var(--arrowTop);
        right: var(--arrowSpill);
        box-shadow: 3px 0 $blur rgba(0, 0, 0, 0.12),
          0 -2px $blur rgba(204, 149, 149, 0.12);
        border-color: $popperBg $popperBg transparent transparent;
      }
    }

    &.rightTop,
    &.right,
    &.rightBottom {
      &::before {
        top: var(--arrowTop);
        left: var(--arrowSpill);
        box-shadow: 0 3px $blur rgba(0, 0, 0, 0.1),
          -2px 0 $blur rgba(0, 0, 0, 0.1);
        border-color: transparent transparent $popperBg $popperBg;
      }
    }
  }
}

@function showdow($x, $y) {
  @return $x $y $popconfirm-box-shadow-blur 3px rgba(0, 0, 0, 0.08);
}

.cxd-popconfirm {
  border-radius: 2px;
  background-color: $popconfirm-border-radius;
  opacity: 1;
  z-index: $popconfirm-z-index;
  visibility: visible;

  &.hidden {
    opacity: 0;
    visibility: hidden;
  }

  &[class*='top'] {
    box-shadow: showdow(0, 6px);
  }

  &[class*='bottom'] {
    box-shadow: showdow(0, -6px);
  }

  &[class*='left'] {
    box-shadow: showdow(6px, 0);
  }

  &[class*='right'] {
    box-shadow: showdow(-6px, 0);
  }

  // 箭头样式
  @include popperArrow(
    $popconfirm-background-color,
    $popconfirm-horizontal-gap,
    $popconfirm-box-shadow-blur
  );

  &-content {
    min-width: $popconfirm-width;
    padding: $popconfirm-vertical-gap $popconfirm-horizontal-gap;
  }

  &-title {
    font-weight: 600;
    line-height: $popconfirm-title-line-height;
    color: $popconfirm-title-color;
    font-size: $popconfirm-title-font-size;
    margin: 0;

    svg {
      margin-right: $popconfirm-title-icon-margin-right;
      vertical-align: top;
      line-height: $popconfirm-title-line-height;
      color: $popconfirm-icon-color;
      font-size: $popconfirm-icon-size;
      width: 1em;
      height: 1em;
    }
  }

  &-message {
    color: $popconfirm-message-color;
    font-size: $popconfirm-message-font-size;
    line-height: 18px;
    margin: $popconfirm-message-margin-top 0 $popconfirm-message-margin-bottom;
  }

  &-interaction {
    text-align: right;

    button:not(:last-child) {
      margin-right: $popconfirm-button-spacing;
    }
  }
}
